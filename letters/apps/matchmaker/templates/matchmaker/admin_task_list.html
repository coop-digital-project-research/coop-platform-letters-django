{% extends "base.html" %}

{% block body_inner %}

<section>
  <h1>Writer tasks</h1>

  <h2>Add new writers from spreadsheet</h2>
  <p>
    In the <a href="https://docs.google.com/spreadsheets/d/1tQJAxAjMT3t74y-W9BNTDsqQuQ5NoMBgN9ZhtS9a__A/">Google Sheet</a>, are there any new entries, without a UUID?
  </p>

  <ul>
    <li><a href="{% url 'admin:matchmaker_writer_add' %}">Create a Writer</a> with their first name and `private_story`</li>
    <li>Copy the UUID back into the spreadsheet</li>
  </ul>

  <h2>Send 'get started' emails</h2>
  {% if writers_awaiting_get_started_email %}

    <p>
      These writers don't have a `get_started_email_sent` date.
    </p>

    <ul>
      {% for writer in writers_awaiting_get_started_email %}
      <li>
        {{ writer.first_name }}:
        <a href="{% url 'admin-task-list-writer-email' 'get-started' writer.uuid %}">[email template]</a>
        <a href="{% url 'admin:matchmaker_writer_change' writer.uuid %}">[edit]</a></li>
      {% endfor %}
    </ul>

    <p>Tasks:</p>
    <ul>
      <li>Send the get started email by copying and pasting the template</li>
      <li>Set the `get_started_email_sent` field to today's date.</li>
    </ul>
  {% else %}
    <p>Nothing to do here.</p>
  {% endif %}

  <h2>Send 'chase' emails</h2>
  <ul>
    <li>Send 3 days after 'get started' email</li>
    <li><b>IF</b> they don't have profile and training completed</li>
  </ul>

  <h2>Send 'final chase' emails</h2>
  <ul>
    <li>Send 3 days after 'final chase' email</li>
    <li><b>IF</b> they don't have profile and training completed</li>
  </ul>

  <h2>Send 'profile reminder' emails</h2>
  <ul>
    <li>Anyone who has done `training` but not completed a `profile`</li>
  </ul>

  <h2>Allocate writers to readers</h2>
  <p>TODO</p>

  <h2>Send 'priming' emails</h2>
  <p>TODO</p>

  <h2>Send 'follow up' emails</h2>
  <p>TODO</p>

  <h2>Delete unresponsive writers</h2>
  <p>
  </p>

  <ul>
    <li>7 days after 'final chase' email</li>
    <li><b>IF</b> they don't have profile completed</li>
    <li>Delete the Writer model the database</li>
  </ul>

</section>
<section>

  <h1>Reader tasks</h1>

  <h2>Add new readers from spreadsheet</h2>
    <p>
      In the <a href="https://docs.google.com/spreadsheets/d/1_qy3PIv8N1-p0eV7vUxASl1kLqXkbNQeBKwuUqbu_0I/">Google Sheet</a>, are there any new entries, without a UUID?
    </p>

    <ul>
      <li><a href="{% url 'admin:matchmaker_reader_add' %}">Create a Reader</a></li>
      <li>Copy the UUID back into the spreadsheet</li>
    </ul>

  <h2>Send 'get started' emails</h2>
  {% if readers_awaiting_get_started_email %}

    <p>
      These readers don't have a `get_started_email_sent` date.
    </p>

    <ul>
      {% for reader in readers_awaiting_get_started_email %}
      <li>
        {{ reader.first_name }}:
        <a href="{% url 'admin-task-list-reader-email' 'get-started' reader.uuid %}">[email template]</a>
        <a href="{% url 'admin:matchmaker_reader_change' reader.uuid %}">[edit Reader]</a></li>
      {% endfor %}
    </ul>

    <p>Tasks:</p>
    <ul>
      <li>Send the get started email by copying and pasting the template</li>
      <li>Set the `get_started_email_sent` field to today's date.</li>
    </ul>
  {% else %}
    <p>Nothing to do here.</p>
  {% endif %}

  <h2>Record postal addresses from emails</h2>
  TODO

  <h2>Send 'chase' emails</h2>

  {% if readers_awaiting_chase_email %}

    <p>
      We don't have a postal address and/or preference for these Readers. We
      sent their get-started email over 2 days ago.
    </p>

    <ul>
      {% for reader in readers_awaiting_chase_email %}
      <li>
        {{ reader.first_name }}:
        <a href="{% url 'admin-task-list-reader-email' 'chase' reader.uuid %}">[email template]</a>
        <a href="{% url 'admin:matchmaker_reader_change' reader.uuid %}">[edit Reader]</a></li>
      {% endfor %}
    </ul>

    <p>Tasks:</p>
    <ul>
      <li>Send the chase email by copying and pasting the template</li>
      <li>Set the `chase_email_sent` field to today's date.</li>
    </ul>
  {% else %}
    <p>Nothing to do here.</p>
  {% endif %}

  <h2>Record postal addresses from emails</h2>
  <ul>
    <li>Check the letters@coopdigital.co.uk mailbox</li>
    <li>Record the postal address in the Google Sheet</li>
    <li>Set `got_postal_address` and record their forwarding preference.</li>
  </ul>

  <h2>Reply with 'baseline survey' emails</h2>


  {% if readers_awaiting_baseline_survey_email %}

    <p>These readers have given us their postal preferences, now we need to reply with their first survey.</p>

    <ul>
      {% for reader in readers_awaiting_baseline_survey_email %}
      <li>
        {{ reader.first_name }}:
        <a href="{% url 'admin-task-list-reader-email' 'baseline_survey' reader.uuid %}">[email template]</a>
        <a href="{% url 'admin:matchmaker_reader_change' reader.uuid %}">[edit Reader]</a></li>
      {% endfor %}
    </ul>

    <p>Tasks:</p>
    <ul>
      <li>Send the baseline wellbeing email by copying and pasting the template</li>
      <li>Set the `baseline_survey_sent` field to today's date.</li>
    </ul>
  {% else %}
    <p>Nothing to do here.</p>
  {% endif %}

  <h2>Update 'got_baseline_survey_results</h2>
  <ul>
    <li>Go to the Google Form</li>
    <li>Tick the 'got_baseline_survey_results' checkbox for any UUIDs in Django</li>
  </ul>

  <h2>Send 'invite to pick' emails</h2>
  {% if readers_awaiting_invite_to_pick_email %}

    <p>These readers have given us their postal preferences, been invited to complete a baseline survey. Now we need to invite them to pick the writers they're happy to hear from.</p>

    <ul>
      {% for reader in readers_awaiting_invite_to_pick_email %}
      <li>
        {{ reader.first_name }}:
        <a href="{% url 'admin-task-list-reader-email' 'invite-to-pick' reader.uuid %}">[email template]</a>
        <a href="{% url 'admin:matchmaker_reader_change' reader.uuid %}">[edit Reader]</a></li>
      {% endfor %}
    </ul>

    <p>Tasks:</p>
    <ul>
      <li>Send the invite to pick email by copying and pasting the template</li>
      <li>Set the `invite_to_pick_email_sent` field to today's date.</li>
    </ul>
  {% else %}
    <p>Nothing to do here.</p>
  {% endif %}

  <h2>Send 'priming' emails</h2>
  <ul>
    <li>If we've matched them with a Writer</li>
    <li>Send them the 'priming' email</li>
    <li>Update 'priming_email_sent' date</li>
  </ul>

  <h2>Send 'follow up' emails</h2>
  <ul>
    <li>10 days after 'priming_email_sent'</li>
    <li>Send them the 'follow up' email</li>
  </ul>
</section>

<section>
  <h1>Allocations</h1>

  {% for allocation in allocations %}
  <h2>{{ allocation.reference }}</h2>

    <p>{{ allocation.reader }} to {{ allocation.writer }}</p>
    <ul>
      <li><a href="{% url 'admin-task-list-allocation-email' 'reader-priming' allocation.reference %}">[reader-priming]</a></li>
      <li><a href="{% url 'admin-task-list-allocation-email' 'reader-follow-up' allocation.reference %}">[reader follow up]</a></li>
      <li><a href="{% url 'admin-task-list-allocation-email' 'reader-got-letter-closure' allocation.reference %}">[reader got letter closure]</a></li>
      <li><a href="{% url 'admin-task-list-allocation-email' 'reader-no-letter-closure' allocation.reference %}">[reader no letter closure]</a></li>
      <li><a href="{% url 'admin-task-list-allocation-email' 'writer-priming' allocation.reference %}">[writer-priming]</a></li>
      <li><a href="{% url 'admin-task-list-allocation-email' 'writer-follow-up' allocation.reference %}">[writer follow up]</a></li>
      <li><a href="{% url 'admin-task-list-allocation-email' 'writer-midway' allocation.reference %}">[writer midway]</a></li>
      <li><a href="{% url 'admin-task-list-allocation-email' 'writer-sent-letter-closure' allocation.reference %}">[writer sent letter closure]</a></li>
      <li><a href="{% url 'admin-task-list-allocation-email' 'writer-no-sent-letter-closure' allocation.reference %}">[writer no sent letter closure]</a></li>
    </ul>
  {% endfor %}



</section>


{% endblock %}
